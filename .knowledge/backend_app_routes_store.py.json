{"is_source_file": true, "format": "Python", "description": "This Python source file defines API routes using Flask and Flask-Smorest for an audiobook store application. It includes endpoints for browsing available audiobooks, purchasing an audiobook, accessing a user's library, and managing playback progress. The code sets up multiple Flask Blueprints with associated route classes and methods, schema references, and database interactions.", "external_files": [".schemas", "..models"], "external_methods": ["db.session.add", "db.session.commit", "Audiobook.query.all", "Purchase.query.filter_by", "PlaybackProgress.query.filter_by", "abort"], "published": ["register_routes"], "classes": [{"name": "StoreList", "description": "Endpoint for browsing available audiobooks in the store."}, {"name": "PurchaseAudiobook", "description": "Endpoint for purchasing audiobooks."}, {"name": "UserLibrary", "description": "Endpoint for viewing a user's purchased audiobooks."}, {"name": "PlaybackProgressView", "description": "Endpoint for managing playback progress for a user's audiobook."}], "methods": [{"name": "get(self)", "description": "Retrieve list of all audiobooks in the store or user's library, or get playback progress.", "scope": "StoreList", "scopeKind": "class"}, {"name": "post(self, purchase_data)", "description": "Create a purchase record for an audiobook.", "scope": "PurchaseAudiobook", "scopeKind": "class"}, {"name": "put(self, data, user_id, audiobook_id)", "description": "Update or create playback progress for a user's audiobook.", "scope": "PlaybackProgressView", "scopeKind": "class"}, {"name": "get(self, user_id)", "scope": "UserLibrary", "scopeKind": "class", "description": "unavailable"}, {"name": "get(self, user_id, audiobook_id)", "scope": "PlaybackProgressView", "scopeKind": "class", "description": "unavailable"}, {"name": "register_routes(api)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["Audiobook.query.all", "Purchase.query.filter_by", "PlaybackProgress.query.filter_by", "db.session.add", "db.session.commit", "abort"], "search-terms": ["audiobook_store", "UserLibrary", "PlaybackProgress", "purchase", "library", "progress", "routes", "blueprint", "Flask", "MethodView"], "state": 2, "file_id": 7, "knowledge_revision": 22, "git_revision": "a9545084c104b2d4f7f72ecabc6b796ecd4e5cbd", "revision_history": [{"15": ""}, {"22": "a9545084c104b2d4f7f72ecabc6b796ecd4e5cbd"}], "ctags": [{"_type": "tag", "name": "PlaybackProgressView", "path": "/home/kavia/workspace/code-generation/audiobook-library-55ac5558/backend/app/routes/store.py", "pattern": "/^class PlaybackProgressView(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PurchaseAudiobook", "path": "/home/kavia/workspace/code-generation/audiobook-library-55ac5558/backend/app/routes/store.py", "pattern": "/^class PurchaseAudiobook(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "StoreList", "path": "/home/kavia/workspace/code-generation/audiobook-library-55ac5558/backend/app/routes/store.py", "pattern": "/^class StoreList(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserLibrary", "path": "/home/kavia/workspace/code-generation/audiobook-library-55ac5558/backend/app/routes/store.py", "pattern": "/^class UserLibrary(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "blp", "path": "/home/kavia/workspace/code-generation/audiobook-library-55ac5558/backend/app/routes/store.py", "pattern": "/^blp = Blueprint($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "blp_library", "path": "/home/kavia/workspace/code-generation/audiobook-library-55ac5558/backend/app/routes/store.py", "pattern": "/^blp_library = Blueprint($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "blp_playback", "path": "/home/kavia/workspace/code-generation/audiobook-library-55ac5558/backend/app/routes/store.py", "pattern": "/^blp_playback = Blueprint($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/audiobook-library-55ac5558/backend/app/routes/store.py", "pattern": "/^    def get(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "StoreList", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/audiobook-library-55ac5558/backend/app/routes/store.py", "pattern": "/^    def get(self, user_id):$/", "language": "Python", "kind": "member", "signature": "(self, user_id)", "scope": "UserLibrary", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/audiobook-library-55ac5558/backend/app/routes/store.py", "pattern": "/^    def get(self, user_id, audiobook_id):$/", "language": "Python", "kind": "member", "signature": "(self, user_id, audiobook_id)", "scope": "PlaybackProgressView", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/audiobook-library-55ac5558/backend/app/routes/store.py", "pattern": "/^    def post(self, purchase_data):$/", "language": "Python", "kind": "member", "signature": "(self, purchase_data)", "scope": "PurchaseAudiobook", "scopeKind": "class"}, {"_type": "tag", "name": "put", "path": "/home/kavia/workspace/code-generation/audiobook-library-55ac5558/backend/app/routes/store.py", "pattern": "/^    def put(self, data, user_id, audiobook_id):$/", "language": "Python", "kind": "member", "signature": "(self, data, user_id, audiobook_id)", "scope": "PlaybackProgressView", "scopeKind": "class"}, {"_type": "tag", "name": "register_routes", "path": "/home/kavia/workspace/code-generation/audiobook-library-55ac5558/backend/app/routes/store.py", "pattern": "/^def register_routes(api):$/", "language": "Python", "kind": "function", "signature": "(api)"}, {"_type": "tag", "name": "store_blp", "path": "/home/kavia/workspace/code-generation/audiobook-library-55ac5558/backend/app/routes/store.py", "pattern": "/^    from .store import blp as store_blp, blp_library, blp_playback$/", "file": true, "language": "Python", "kind": "unknown", "scope": "register_routes", "scopeKind": "function", "nameref": "unknown:blp"}], "hash": "d96bf53dadf69738778114d8b1e5f043", "format-version": 4, "code-base-name": "backend", "filename": "backend/app/routes/store.py", "fields": [{"name": "blp = Blueprint(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "blp_library = Blueprint(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "blp_playback = Blueprint(", "scope": "", "scopeKind": "", "description": "unavailable"}]}